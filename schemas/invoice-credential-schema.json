{
  "$id": "",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Business Invoice Credential",
  "description": "Credential representing a business invoice issued by an authorized person",
  "type": "object",
  "credentialType": "InvoiceCredential",
  "version": "1.0.0",
  "properties": {
    "v": {
      "description": "Version string",
      "type": "string"
    },
    "d": {
      "description": "SAID of this credential",
      "type": "string"
    },
    "i": {
      "description": "Issuer AID",
      "type": "string"
    },
    "ri": {
      "description": "Registry identifier",
      "type": "string"
    },
    "s": {
      "description": "Schema SAID",
      "type": "string"
    },
    "a": {
      "description": "Attribute section",
      "type": "object",
      "properties": {
        "d": {
          "description": "SAID of attributes",
          "type": "string"
        },
        "i": {
          "description": "Issuee AID",
          "type": "string"
        },
        "dt": {
          "description": "Issuance datetime ISO 8601",
          "type": "string",
          "format": "date-time"
        },
        "invoiceNumber": {
          "description": "Unique invoice identifier",
          "type": "string"
        },
        "invoiceDate": {
          "description": "Invoice date ISO 8601",
          "type": "string",
          "format": "date-time"
        },
        "dueDate": {
          "description": "Payment due date ISO 8601",
          "type": "string",
          "format": "date-time"
        },
        "sellerLEI": {
          "description": "Legal Entity Identifier of seller",
          "type": "string",
          "pattern": "^[A-Z0-9]{20}$"
        },
        "buyerLEI": {
          "description": "Legal Entity Identifier of buyer",
          "type": "string",
          "pattern": "^[A-Z0-9]{20}$"
        },
        "currency": {
          "description": "Currency code (fiat or cryptocurrency)",
          "type": "string",
          "pattern": "^[A-Z0-9]{1,5}$",
          "examples": ["USD", "EUR", "ALGO", "BTC", "USDC"]
        },
        "totalAmount": {
          "description": "Total invoice amount",
          "type": "number",
          "minimum": 0
        },
        "lineItems": {
          "description": "Invoice line items (single item for simplicity)",
          "type": "array",
          "minItems": 1,
          "maxItems": 1,
          "items": {
            "type": "object",
            "properties": {
              "description": {
                "type": "string"
              },
              "quantity": {
                "type": "number",
                "minimum": 0
              },
              "unitPrice": {
                "type": "number",
                "minimum": 0
              },
              "amount": {
                "type": "number",
                "minimum": 0
              }
            },
            "required": ["description", "quantity", "unitPrice", "amount"]
          }
        },
        "paymentTerms": {
          "description": "Payment terms (optional)",
          "type": "string"
        },
        "paymentMethod": {
          "description": "Payment method",
          "type": "string",
          "enum": ["blockchain", "wire_transfer", "check"]
        },
        "paymentChainID": {
          "description": "Blockchain chain identifier (e.g., ethereum, polygon, stellar, algorand, 1, 137)",
          "type": "string",
          "minLength": 1,
          "maxLength": 50
        },
        "paymentWalletAddress": {
          "description": "Blockchain wallet address for payment",
          "type": "string",
          "minLength": 20,
          "maxLength": 100
        },
        "ref_uri": {
          "description": "Reference URI for blockchain transaction or supporting documentation. Supports full blockchain explorer URLs (e.g., etherscan.io, algoexplorer.io) and transaction URIs.",
          "type": "string",
          "format": "uri",
          "minLength": 10,
          "maxLength": 500,
          "examples": [
            "https://etherscan.io/tx/0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
            "https://algoexplorer.io/tx/ABC123DEF456GHI789JKL012MNO345PQR678STU901VWX234YZ",
            "https://stellarchain.io/tx/abc123def456",
            "ethereum:0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
            "algorand:txid:ABC123DEF456GHI789",
            "stellar:txid:xyz789abc123"
          ]
        }
      },
      "required": [
        "d",
        "i",
        "dt",
        "invoiceNumber",
        "invoiceDate",
        "dueDate",
        "sellerLEI",
        "buyerLEI",
        "currency",
        "totalAmount",
        "lineItems",
        "paymentMethod",
        "paymentChainID",
        "paymentWalletAddress",
        "ref_uri"
      ]
    },
    "e": {
      "description": "Edge section",
      "type": "object",
      "properties": {
        "d": {
          "description": "SAID of edges",
          "type": "string"
        },
        "oor": {
          "description": "Reference to issuer OOR credential",
          "type": "object",
          "properties": {
            "n": {
              "description": "SAID of OOR credential",
              "type": "string"
            },
            "s": {
              "description": "Schema SAID of OOR credential",
              "type": "string"
            },
            "o": {
              "description": "Operator",
              "type": "string",
              "const": "I2I"
            }
          },
          "required": ["n", "s", "o"]
        }
      },
      "required": ["d", "oor"]
    },
    "r": {
      "description": "Rules section",
      "type": "object",
      "properties": {
        "d": {
          "description": "SAID of rules",
          "type": "string"
        },
        "usageDisclaimer": {
          "type": "object",
          "properties": {
            "l": {
              "description": "Usage disclaimer",
              "type": "string"
            }
          },
          "required": ["l"]
        },
        "invoiceTerms": {
          "type": "object",
          "properties": {
            "l": {
              "description": "Invoice terms",
              "type": "string"
            }
          },
          "required": ["l"]
        }
      },
      "required": ["d", "usageDisclaimer", "invoiceTerms"]
    }
  },
  "required": ["v", "d", "i", "ri", "s", "a", "e", "r"],
  "additionalProperties": false
}
